<div class="container" ng-controller='letterDisplayController'>

    <div class="row banner">
        <div class="col-md-12">
            <img src="/assets/pigsbanner.jpg" alt="pigs banner" />
        </div>
    </div>

    <h3>Choose your cause</h3>
    <div class="causeinfo letter_background" >
        <form class="form-horizontal">
            <div class="form-group">
                <label for="causeSelect" class="col-sm-2 control-label">Cause:</label>
                <div class="col-sm-10">
                    <select id="causeSelect" class="form-control" ng-options='cause.name for cause in causes' ng-model='selCause' ng-change="update()">
                        <option value='' selected disabled>Choose a Cause</option>
                    </select>
                </div>
            </div>
        </form>

        <!-- <div id="letter_form_address" > -->
        <div ng-if="showDetails" >
            <h4 class="text-center"><b>Cause Details</b></h4>

            <form class="form-horizontal">
                <div class="form-group">
                    <label for="cause_description" class="col-sm-2 control-label">Cause Description:</label>
                    <div class="col-sm-10">
                        <textarea class="form-control" rows="3"id="cause_description" readonly >{{ selCause.description }}</textarea>
                    </div>
                </div>
                <div class="form-group">
                    <label for="cause_letter_body" class="col-sm-2 control-label">Cause Letter Body:</label>
                    <div class="col-sm-10">
                        <textarea class="form-control" rows="3"id="cause_letter_body" readonly >{{ selCause.letter_body }}</textarea>
                    </div>
                </div>
                <div class="form-group">
                    <label for="cause_rep_level" class="col-sm-2 control-label">Cause Rep. Level:</label>
                    <div class="col-sm-10">
                        <textarea class="form-control" rows="3"id="cause_rep_level" readonly >{{ selCause.rep_level }}</textarea>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div ng-show='!loggedIn && showGuestFields'>
        <h3>Enter your information </h3>
        <div class="guestinfo letter_background">
            <b>Guest Info:</b>
            <form class="form-horizontal">
                <!-- First & Last Name Input Fields -->
                <div class="form-group">
                    <div class="col-sm-5">
                        <input type="text" class="form-control" id="first-name" placeholder="First Name" ng-model="user.firstName">
                        <span class="regErrors" ng-bind="regErrors.firstName"></span>
                    </div>
                    <div class="col-sm-5">
                        <input type="text" class="form-control" id="last-name" placeholder="Last Name" ng-model="user.lastName">
                        <span class="regErrors" ng-bind="regErrors.lastName"></span>
                    </div>
                </div>

                <!-- Address -->
                <div class="form-group">
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="street-address" placeholder="Street Address" ng-model="addr" ng-change="registerAddress()">
                        <span class="regErrors" ng-bind="regErrors.address"></span>
                    </div>
                </div>
                <!-- City && State-->
                <div class="form-group">
                    <div class="col-sm-5">
                        <input type="text" class="form-control" id="city" placeholder="City" ng-model="city" ng-change="registerAddress()">
                        <span class="regErrors" ng-bind="regErrors.city"></span>
                    </div>
                    <div class="col-sm-5">
                        <input type="text" class="form-control" id="state" placeholder="State" ng-model="state" ng-change="registerAddress()">
                        <span class="regErrors" ng-bind="regErrors.state"></span>
                    </div>
                </div>
                <!-- Zip -->
                <div class="form-group">
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="zip-code" placeholder="Zip Code" ng-model="zip" ng-change="registerAddress()">
                        <span class="regErrors" ng-bind="regErrors.zip"></span>
                    </div>
                </div>
                <!-- For Selecting Correct Location -->
                <p>
                    Select Address below:
                </p>
                <div class="row">
                    <div class="col-md-12">
                        <div id="choices">
                            <label style='display: block;' ng-repeat='choice in choices track by $index'>
                                <input type="radio" name="address" ng-model="address.choice" ng-value="choice" ng-click="formatAddr()" required ng-change="address_selection()"> {{ choice }}
                            </label>
                            <span class="regErrors" ng-bind="regErrors.confirmAddr"></span>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!-- end guest info -->

    <br>

    <div ng-show="select_recipients">
        <!-- <h3>Wrap Up: Preview and print your letter </h3><br> -->
        <h3>Select recipient(s)</h3>
        <!-- <button class="btn btn-primary" ng-click='getReps(selCause.rep_level)'>Print Letter and Review Recipients</button> -->
        <div class="printletter letter_background">
            <div ng-show=gotCause>
                <div class='col-sm-2 repbox' ng-repeat='rep in reps'>
                    <img ng-src='{{rep.rep.photoUrl }}' alt=Rep width=150 height=187><br>
                    <input type="checkbox" ng-click='repPicked(rep)'>
                    {{ rep.rep.name }}<br>
                    {{ rep.position }}
                </div>
                <div ng-if='!reps' class='col-sm-12 repbox2'>
                    <img ng-src='{{rep.rep.photoUrl || fixed.pic }}' alt=Rep width=150 height=187><br>
                    <input type="checkbox" ng-click='repPicked(rep)'>
                    {{ fixed.name }}<br>
                    {{ fixed.pos }}
                </div>
            </div>
        </div>

        <!--- Letters --->
        <div class="preview_letter" >
            <h3 id="preview_print_h3" ng-if="chosenRep[0] || chosenRep[1]">Preview and Print your letter(s) <span class="pull-right"><button ng-click="printLetter('#printDiv')" class="btn btn-primary print_save">PRINT</button><button ng-click='saveLetter()'  class="btn btn-primary print_save">SAVE</button></span></h3>
            <div id='printDiv' ng-show=true>
                <div class='page-break' ng-repeat='rep in chosenRep'>
                    <div class="printletter letter_background">
                        <img src="./assets/L4A-logo-cattle2-7-2016.png" alt="Logo" id=letterlogo><br>
                        {{ user.firstName || loggedUser.first_name }} {{ user.lastName || loggedUser.last_name }}<br>
                        {{ addr || loggedUser.street_address }}<br>
                        {{ city || loggedUser.city }}, {{ state || loggedUser.state }} {{ zip || loggedUser.zipcode }}
                        <br><br>
                        {{ rep.letterPos }} {{ rep.rep.name || fixed.name }}<br>
                        {{ rep.position || fixed.pos }}<br>
                        {{ rep.rep.address[0].line1 || fixed.addr }}<br>
                        {{ rep.rep.address[0].city || fixed.city }}, {{ rep.rep.address[0].state || fixed.state }} {{ rep.rep.address[0].zip || fixed.zip }}<br><br>

                        Dear <span>{{ rep.letterPos }} {{ rep.letterName || fixed.name }}</span>,<br><br>
                        {{ selCause.letter_body }}<br><br>
                        Sincerely, <br><br><br>
                        {{ user.firstName || loggedUser.first_name }} {{ user.lastName || loggedUser.last_name }}
                        <br><br><br><br>
                        {{ selCause.letter_footnote }}
                    </div>
                </div>
                <!--- End of letters --->

            </div> <!--- End of printLetter --->
        </div>

        <!-- <div class="col-sm-12" ng-show="print_save"> -->
        <div class="col-sm-12">
            <br>
            <button ng-click="printLetter('#printDiv')">PRINT</button>
            <br>
            <button ng-click='saveLetter()'>SAVE</button>
        </div>

    </div>
