<!-- This is the Main Admin Panel -->
<script src="dirPagination.js"></script>
<div id="adminheader">
    <h3>Administrative Panel</h3></div>

<div id="admin_container" ng-controller='adminController' ng-show='loggedIn'>

    <!-- Left Admin panel -->
    <div class="col-sm-12 admin_container">
        <a href="https://accounts.google.com/servicelogin?service=analytics"><button class="btn btn-primary analytics"> To Google Analytics</button></a>

        <div class="row">
            <div><!--Helps control Tab CSS<-->
                <!-- Nav tabs -->
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="active"><a showtab="" href="#causes" aria-controls="home" role="tab" data-toggle="tab">CAUSES</a></li>
                    <li role="presentation"><a showtab="" href="#users" aria-controls="profile" role="tab" data-toggle="tab">USERS</a></li>
                    <li role="presentation"><a showtab="" href="#guests" aria-controls="messages" role="tab" data-toggle="tab">GUEST USERS</a></li>
                    <li role="presentation"><a showtab="" href="#pendingcauses" aria-controls="messages" role="tab" data-toggle="tab">PENDING CAUSES</a></li>
                </ul>


                <!-- Tab panes -->
                <div class="tab-content">
                    <!-- Causes Tab in Admin Panel -->
                    <div role="tabpanel" class="tab-pane active" id="causes">
                        <a href="#causeAddadmin"><button id="addcause" class="admin_buttons btn btn-primary analytics">Create New Cause</button></a>
                        <button class="btn btn-primary analytics" ng-click="enableAllCauses()">Enable All</button>
                        <button class="btn btn-primary analytics" ng-click="disableAllCauses()">Disable All</button>
                        <table class="table admintable">
                            <thead>
                                <th><a href="" ng-click="sort='name'; sortReverse=!sortReverse;"> Cause</a></th>
                                <th><a href="" ng-click="sort='supports'; sortReverse=!sortReverse;"> # of User Prints</a></th>
                                <th><a href="" ng-click="sort='guests_causes'; sortReverse=!sortReverse;"> # of Guest Prints</a></th>
                                <th><a href="" ng-click="sort='createdAt'; sortReverse=!sortReverse;"> Created</a></th>
                                <th><a href="" ng-click="sort='updatedAt'; sortReverse=!sortReverse;"> Updated</a></th>
                                <th><a href="" ng-click="sort='enabled'; sortReverse=!sortReverse;"> Enabled</a></th>
                                <th>Edit</th>
                                <th>Delete</th>
                                <th>Text</th>
                                <th>Email</th>
                            </thead>
                            <tbody>
                                <input type="text" ng-model="filter_causes" placeholder=" Search Causes"><br>
                                <dir-pagination-controls max-size="10" direction-links="true" boundary-links="true"></dir-pagination-controls>
                                <tr dir-paginate="cause in causes |orderBy:sort:sortReverse| filter: filter_causes | itemsPerPage:15">
                                    <td><a href="#/getSingleCause/{{cause.id}}">{{cause.name}}</a></td>
                                    <td>{{cause.supports - cause.guests_causes}}</td>
                                    <td>{{cause.guests_causes}}</td>
                                    <td>{{cause.createdAt | date:"h:mm a '-' MM/dd/yyyy"}}</span></td>
                                    <td>{{cause.updatedAt | date:"h:mm a '-' MM/dd/yyyy"}}</span></td>
                                    <td><input type="checkbox" ng-click='toggleCause(cause)' ng-checked="{{cause.enabled}}"></td>
                                    <td><a href="#/causeadmin/{{cause.id}}"><button id="editCause" class="admin_panel">Edit </button></a></td>
                                    <td><button id="deletecause" class="admin_panel" ng-click='deleteCause(cause)'>Delete</button></td>
                                    <td><button id="sendText" class="admin_panel" ng-click='sendText(cause)'>Send Text</button></td>
                                    <td><button id="sendEmail" class="admin_panel" ng-click='sendEmail(cause)'>Send Email</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div> <!-- End Causes tab -->

                    <!-- Users Tab of Admin Panel -->
                    <div role="tabpanel" class="tab-pane" id="users">
                        <table class="table admintable">
                            <thead>
                                <th><a href="" ng-click="sort='id'; sortReverse=!sortReverse;"> ID#</a></th>
                                <th><a href="" ng-click="sort='first_name'; sortReverse=!sortReverse;"> First Name</a></th>
                                <th><a href="" ng-click="sort='last_name'; sortReverse=!sortReverse;"> Last Name</a></th>
                                <th><a href="" ng-click="sort='email'; sortReverse=!sortReverse;"> Email</a></th>
                                <th><a href="" ng-click="sort='supports'; sortReverse=!sortReverse;"> # Causes</a></th>
                                <th><a href="" ng-click="sort='city'; sortReverse=!sortReverse;">City</a></th>
                                <th><a href="" ng-click="sort='state'; sortReverse=!sortReverse;">State</a></th>
                                <th><a href="" ng-click="sort='phone_number'; sortReverse=!sortReverse;">Phone #</a></th>
                                <th><a href="" ng-click="sort='text_notification'; sortReverse=!sortReverse;">Text?</a></th>
                                <th><a href="" ng-click="sort='email_notifacation'; sortReverse=!sortReverse;">Email?</a></th>
                                <th><a href="" ng-click="sort='admin'; sortReverse=!sortReverse;">Admin?</a></th>
                                <th><a href="" ng-click="sort='login_count'; sortReverse=!sortReverse;"># Logins</a></th>
                                <th><a href="" ng-click="sort='updatedAt'; sortReverse=!sortReverse;">Last Activity</a></th>
                                <th>Delete</th>
                            </thead>
                            <tbody>
                                <input type="text" ng-model="filter_users" placeholder=" Search Users"><br>
                                <dir-pagination-controls max-size="10" direction-links="true" boundary-links="true"></dir-pagination-controls>
                                <tr dir-paginate="user in users |orderBy:sort:sortReverse| filter: filter_users | itemsPerPage:15">
                                    <td>{{user.id}}</td>
                                    <td>{{ user.first_name }} </td>
                                    <td>{{ user.last_name }}</td>
                                    <td>{{user.email}}</td>
                                    <td>{{user.supports}}</td>
                                    <td>{{user.city}}</td>
                                    <td>{{user.state}}</td>
                                    <td>{{user.phone_number}}</td>
                                    <td>{{user.phone_notification}}</td>
                                    <td>{{user.email_notification}}</td>
                                    <td>{{user.admin}}</td>
                                    <td>{{user.login_count}}</td>
                                    <td>{{user.updatedAt | date:"h:mm a '-' MM/dd/yy"}}</span></td>
                                    <td><button id="deletecause" class="admin_panel" ng-click='delUser(user)'>Delete</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div> <!-- End Users tab -->

                    <!-- Guests Tab of Admin Panel -->
                    <div role="tabpanel" class="tab-pane" id="guests">
                        <table class="table admintable">
                            <thead>
                                <th><a href="" ng-click="sort='id'; sortReverse=!sortReverse;"> Guest ID#</a></th>
                                <th><a href="" ng-click="sort='first_name'; sortReverse=!sortReverse;"> First Name</a></th>
                                <th><a href="" ng-click="sort='last_name'; sortReverse=!sortReverse;"> Last Name</a></th>
                                <th><a href="" ng-click="sort='cause_id'; sortReverse=!sortReverse;"> Cause ID#</a></th>
                                <th><a href="" ng-click="sort='cause_name'; sortReverse=!sortReverse;"> Cause Name</a></th>
                                <th><a href="" ng-click="sort='city'; sortReverse=!sortReverse;"> City</a></th>
                                <th><a href="" ng-click="sort='State'; sortReverse=!sortReverse;"> State</a></th>
                                <th>Delete</th>
                            </thead>
                            <tbody>
                                <input type="text" ng-model="filter_guests" placeholder=" Search Guest Users"><br>
                                <dir-pagination-controls max-size="10" direction-links="true" boundary-links="true"></dir-pagination-controls>
                                <tr dir-paginate="guest in guests |orderBy:sort:sortReverse| filter: filter_guests | itemsPerPage:15">
                                    <td>{{guest.id}}</td>
                                    <td>{{guest.first_name}}</td>
                                    <td>{{guest.last_name}}</td>
                                    <td>{{guest.cause_id}}</td>
                                    <td>{{guest.cause_name}}</td>
                                    <td>{{guest.city}}</td>
                                    <td>{{guest.state}}</td>
                                    <td><button id="deletecause" class="admin_panel" ng-click='delGuest(guest)'>Delete</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div><!-- End Guests tab -->

                    <!-- Pending Causes Tab of Admin Panel -->
                    <div role="tabpanel" class="tab-pane " id="pendingcauses">
                        <table class="table admintable">
                            <thead>
                                <th><a href="" ng-click="sort='name'; sortReverse=!sortReverse;"> Cause</a></th>
                                <th><a href="" ng-click="sort='first_name'; sortReverse=!sortReverse;"> Volunteer</a></th>
                                <th><a href="" ng-click="sort='email'; sortReverse=!sortReverse;"> Email</a></th>
                                <th><a href="" ng-click="sort='createdAt'; sortReverse=!sortReverse;"> Created At</a></th>
                                <th>Edit</th>
                                <th>Delete</th>
                            </thead>
                            <tbody>
                                <input type="text" ng-model="filter_pendingcauses" placeholder=" Search Pending"><br>
                                <dir-pagination-controls max-size="10" direction-links="true" boundary-links="true"></dir-pagination-controls>
                               <tr dir-paginate="pendingcause in pendingcauses |orderBy:sort:sortReverse| filter: filter_pendingcauses | itemsPerPage:15">
                                    <td>{{pendingcause.name}}</td>
                                    <td>{{pendingcause.first_name}} {{pendingcause.last_name}}</td>
                                    <td>{{pendingcause.email}}</td>
                                    <td>{{pendingcause.createdAt | date:"MM/dd/yyyy 'at' h:mma"}}</td>
                                    <td><a href="#/pendingcauseadmin/{{pendingcause.id}}"><button id="editPendingCause" class="admin_panel">Edit & Add</button></a></td>
                                    <td><button id="deletependingcause" class="admin_panel" ng-click='deletePendCause(pendingcause)'>Delete</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div><!-- End Pendingcauses tab -->
                </div><!-- End of tabs container-->
            </div><!-- div for CSS purposes w/ admintabs -->
        </div><!-- End of row-->
    </div><!-- End Admin Container -->
</div> <!-- End Admin Controller Container -->
